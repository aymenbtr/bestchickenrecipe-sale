<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- Primary Meta Tags -->
    <title>Best Chicken Recipes | Premium Culinary Guide & Cooking Tips</title>
    <meta name="title" content="Best Chicken Recipes | Premium Culinary Guide & Cooking Tips">
    <meta name="description" content="Master the art of chicken cooking with our premium recipes, expert techniques, and step-by-step culinary guides. Find the best chicken recipes from around the world, rated by our community.">
    <meta name="keywords" content="chicken recipes, cooking, culinary, recipes, dinner ideas, chicken dishes, cooking guide, food, fried chicken, baked chicken, grilled chicken, healthy chicken recipes, easy chicken recipes, best chicken recipes">
    <meta name="author" content="Best Chicken Recipes">
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">
    <meta name="distribution" content="global">
    <meta name="rating" content="general">
    
    <!-- Geo Tags -->
    <meta name="geo.region" content="US">
    <meta name="geo.placename" content="United States">
    
    <!-- Copyright -->
    <meta name="copyright" content="Best Chicken Recipes 2023">
    
    <!-- Mobile Specific Meta Tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Best Chicken Recipes">
    
    <!-- Theme Color for Mobile Browsers -->
    <meta name="theme-color" content="#C32B2B">
    <meta name="msapplication-TileColor" content="#C32B2B">
    <meta name="msapplication-navbutton-color" content="#C32B2B">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://bestchickenrecipes.com/">
    
    <!-- Open Graph / Facebook Meta Tags -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://bestchickenrecipes.com/">
    <meta property="og:site_name" content="Best Chicken Recipes">
    <meta property="og:title" content="Best Chicken Recipes | Premium Culinary Guide">
    <meta property="og:description" content="Master the art of chicken cooking with our premium recipes, expert techniques, and step-by-step culinary guides. Discover delicious chicken recipes rated by our community.">
    <meta property="og:image" content="https://bestchickenrecipes.com/images/social-preview.jpg">
    <meta property="og:image:secure_url" content="https://bestchickenrecipes.com/images/social-preview.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Best Chicken Recipes - Premium Culinary Guide">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@bestchickenrecipes">
    <meta name="twitter:creator" content="@bestchickenrecipes">
    <meta name="twitter:title" content="Best Chicken Recipes | Premium Culinary Guide">
    <meta name="twitter:description" content="Master the art of chicken cooking with our premium recipes, expert techniques, and step-by-step culinary guides.">
    <meta name="twitter:image" content="https://bestchickenrecipes.com/images/twitter-card.jpg">
    <meta name="twitter:image:alt" content="Best Chicken Recipes - Premium Culinary Guide">
    
    <!-- SEO Optimization -->
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="format-detection" content="telephone=no">
    <meta name="HandheldFriendly" content="true">
    
    <!-- Verification Tags (Add your actual verification codes) -->
    <meta name="google-site-verification" content="your-google-verification-code">
    <meta name="msvalidate.01" content="your-bing-verification-code">
    <meta name="p:domain_verify" content="your-pinterest-verification-code">
    
    <!-- Structured Data for Recipe Collections -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Best Chicken Recipes",
        "alternateName": "BestChickenRecipes",
        "url": "https://bestchickenrecipes.com/",
        "description": "Premium culinary guide for chicken recipes and cooking techniques",
        "publisher": {
            "@type": "Organization",
            "name": "Best Chicken Recipes",
            "logo": {
                "@type": "ImageObject",
                "url": "https://bestchickenrecipes.com/images/logo-512.png",
                "width": 512,
                "height": 512
            }
        },
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://bestchickenrecipes.com/search?q={search_term_string}",
            "query-input": "required name=search_term_string"
        },
        "inLanguage": "en-US",
        "image": "https://bestchickenrecipes.com/images/logo-512.png"
    }
    </script>
    
    <!-- Organization Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "Best Chicken Recipes",
        "url": "https://bestchickenrecipes.com/",
        "logo": "https://bestchickenrecipes.com/images/logo-512.png",
        "description": "Your trusted source for professional chicken recipes and cooking techniques",
        "sameAs": [
            "https://www.facebook.com/bestchickenrecipes",
            "https://twitter.com/bestchickenrecipes",
            "https://www.instagram.com/bestchickenrecipes",
            "https://www.pinterest.com/bestchickenrecipes"
        ],
        "contactPoint": {
            "@type": "ContactPoint",
            "contactType": "Customer Service",
            "email": "contact@bestchickenrecipes.com",
            "availableLanguage": "English"
        }
    }
    </script>
    
    <!-- Breadcrumb Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [{
            "@type": "ListItem",
            "position": 1,
            "name": "Home",
            "item": "https://bestchickenrecipes.com/"
        }]
    }
    </script>
    
    <!-- Fonts and Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Favicons - SVG favicon for modern browsers -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='grad' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23C32B2B;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23E55347;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Ccircle cx='50' cy='50' r='45' fill='url(%23grad)'/%3E%3Cg fill='white'%3E%3Cpath d='M35,65 L35,35 L40,30 L40,65 Z'/%3E%3Cpath d='M50,70 L50,25 L55,20 L55,70 Z'/%3E%3Cpath d='M65,65 L65,35 L70,30 L70,65 Z'/%3E%3C/g%3E%3C/svg%3E">
    
    <!-- PNG fallback favicons -->
    <link rel="icon" type="image/png" sizes="16x16" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA0klEQVR4nGNgoBAwUq6BiYnpPxMT038yNTMxMf1nYmL6z8DA8J8cDf+ZmJj+MzAw/CdHA///MzAw/CdXAxMTk8J/BgYFcjQwMTH9Z2Bg+E+OBgYGhv//GRj+k6OBiYnp/38Ghv/kaGBgYPj/n4HhPzkamJiY/jMwMPwnRwMDA8P//wwM/8nRwMTE9J+BgeE/ORoYGBj+/2dg+E+OBiYmpv8MDAz/ydHAwMDw/z8Dw39yNDAxMf1nYGD4T44GBgaG//8ZGP6To4GJiek/AwPDf3I0AABvPB8v7l9FwwAAAABJRU5ErkJggg==">
    <link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAABgklEQVR4nO2Wv0oDQRDGv5OAhY1gIVhY2FhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWNj4B/wFM8vexXO5XC4XuQ8Wdndndr6Z3Zk9wP/+ARwDOANwDeAewAOARwBPAJ4BPAD4APAJYBvAEIB6AAUAcgBkAEgDkAQgAUAcgBgAUQAiAIQBCAEQBCAAwD+AIAAfAL4BPAB4APD5AtAL4AbAK4BXANcArgBcArgEcAHgHMAZgFMAJwCOARwBOARwAOAAwD6AfQB7APYAYgCCAKQAiAMQBSACQBiAEABBAP4B+AHwAeAFwAOABwAvAF4AvAB4APD4ArAI4A7AO4B3ANcArgBcArgEcAHgHMAZgFMAJwCOARwBOARwAOAAwD6AfQB7APYA9gDsAYgBEAQgBUAcgCgAEQDCAIQACALwD8APgA8ALwAeADwAeAHwAuABwOMLwCqAewCfAD4BXAG4BHDxByELZhJfWzOjAAAAAElFTkSuQmCC">
    <link rel="apple-touch-icon" sizes="180x180" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAYAAAA9zQYyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF8klEQVR4nO3dT4hVZRzG8e+dGf+MqYWJUS4sI4Iggggi2rQIIoiIIIKIIIKIIIKIIIKIIIKIIIKIIIKIIIKIIIKIIIKIIIKIIIKIIIKIIIKIIIKI/kBE9Jbvhbepe+fec+95z3vO+X7gWcy9c97nPL/3nHvPnDkD5ERE5kTkXhF5SETuE5F7RORuEblLRO4UkTtE5HYRuU1EbhWRW0TkZhG5SURuFJEbRGRBRK4XketE5FoRuUZErhKRK0XkChG5XEQuE5FLReQSEblYRC4SkQtF5AIRmReR80TkXBE5R0TOFpGzROTM//2+iJz5v98TkTNE5HQRmROR00RkVkROFZFTRGRGRP79iYjM/vvziMyIyMkicpKInCgiJ4jI8SJynIgcKyLHiMjRInKUiEyLyJEiMiUikyJyhIhMiMjhIjIuIoeJyKEicoiIHCwiB4nIQSJyoIgcICL7i8h+IrKviBwgIvuIyN4ispeI7Ckie4jI7iKym4jsKiK7iMjOIrKTiOwoIjuIyPYisp2IbCsi24jI1iKylYhsKSJbiMjmIrKZiGwqIpuIyMYispGIbCgiG4jI+iKynoisKyLriMjaIrKWiKwpImuIyOoispqIrCoiF4vIKv/+tETkIhFZWUSWi8hFIrJMRJaKyIUisqSILBaRRSKyUEQWiMj5InKeiJwrIueIyNkicpaInCkiZ4jI6SJymojMichpIjIrIqeKyCkiMiMiJ4vISSJyooicICLHi8hxInKsiBwjIkeLyLSIHCUiUyIyKSJHiMiEiBwuIuMicpiIHCoih4jIwSJykIgcKCIHiMj+IrKfiOwrIvuIyN4ispeI7Ckie4rI7iKym4jsKiK7iMjOIrKTiOwoIjuIyPYisp2IbCsi24jI1iKylYhsKSJbiMjmIrKZiGwqIpuIyMYispGIbCgiG4jI+iKynoisKyLriMjaIrKWiKwpImuIyOoispqIrCoiK0VkhYisEJHlIrJcRJaJyFIRuVBElojIYhFZJCILRWSBiJwvIueJyLkico6InC0iZ4nImSJyhoi">
    
    <!-- MS Application Tile -->
    <meta name="msapplication-TileImage" content="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAACXBIWXMAAAsTAAALEwEAmpwYAAAHsklEQVR4nO3dT4hVZRzG8e+dGf+MqYWJUS4sI4Iggggi2rQIIoiIIIKIIIKIIIKIIIKIIIKIIIKIIIKIIIKIIIKIIIKIIIKIIIKIIIKIIIKI/kBE9Jbvhbepe+fec+95z3vO+X7gWcy9c97nPL/3nHvPnDkD5ERE5kTkXhF5SETuE5F7RORuEblLRO4UkTtE5HYRuU1EbhWRW0TkZhG5SURuFJEbRGRBRK4XketE5FoRuUZErhKRK0XkChG5XEQuE5FLReQSEblYRC4SkQtF5AIRmReR80TkXBE5R0TOFpGzROTM//2+iJz5v98TkTNE5HQRmROR00RkVkROFZFTRGRGRE4WkZNE5EQROUFEjheR40TkWBE5RkSOFpFpETlKRKZEZFJEjhCRCRE5XETGReQwETlURA4RkYNF5CARORBEDhCR/UVkPxHZV0QOEJEFERkXkXNEZIGIXCAiC0RkoYgsEJEFInKBiCwQkfNF5HwROV9EzhOR80TkXBE5R0TOFpGzROQsETlTRM4QkdNFZE5E5kRkVkROFZFTRGRGRE4WkZNE5EQROUFEjheR40TkWBE5RkSOFpFpETlKRKZEZFJEjhCRCRE5XETGReQwETlURA4RkYNF5CARORBEDhCR/UVkPxHZV0QOEJEFERkXkXNEZIGIXCAiC0RkoYgsEJEFInKBiCwQkfNF5HwROV9EzhOR80TkXBE5R0TOFpGzROQsETlTRM4QkdNFZE5E5kRkVkROFZFTRGRGRE4WkZNE5EQROUFEjheR40TkWBE5RkSOFpFpETlKRKZEZFJEjhCRCRE5XETGReQwETlURA4RkYNF5CARORBEDhCR/UVkPxHZV0QOEJEFERkXkXNEZIGIXCAiC0RkoYgsEJEFInKBiCwQkfNF5HwROV9EzhOR80TkXBE5R0TOFpGzROQsETlTRM4QkdNFZE5E5kRkVkROFZFTRGRGRE4WkZNE5EQROUFEjheR40TkWBE5RkSOFpFpETlKRKZEZFJEjhCRCRE5XETGReQwETlURA4RkYNF5CARORBEDhCR/UVkPxHZV0QOEJH/AdcF2uAAAAAASUVORK5CYII=">
    <meta name="msapplication-config" content="/browserconfig.xml">
    
    <!-- Manifest for PWA -->
    <link rel="manifest" href="/manifest.json">
    
    <style>
        /* ===== CSS Reset & Base Styles ===== */
        :root {
            /* Light Theme Colors */
            --primary: #C32B2B;
            --primary-dark: #9A1F1F;
            --primary-light: #E55347;
            --secondary: #FFB347;
            --accent: #FFD166;
            --background: #FFF9F0;
            --surface: #FFFFFF;
            --card-bg: #FFFFFF;
            --text-dark: #2C1810;
            --text-medium: #5A4A42;
            --text-light: #8A7A72;
            --border: #EEE5DE;
            --shadow: rgba(44, 24, 16, 0.08);
            --shadow-strong: rgba(44, 24, 16, 0.12);
            --success: #27AE60;
            --warning: #F39C12;
            --error: #E74C3C;
            --info: #3498DB;
            
            /* Typography */
            --font-heading: 'Playfair Display', serif;
            --font-body: 'Poppins', sans-serif;
            
            /* Spacing */
            --space-xs: 0.25rem;
            --space-sm: 0.5rem;
            --space-md: 1rem;
            --space-lg: 1.5rem;
            --space-xl: 2rem;
            --space-xxl: 3rem;
            
            /* Transitions */
            --transition-fast: 0.2s ease;
            --transition-medium: 0.3s ease;
            --transition-slow: 0.5s ease;
            
            /* Border Radius */
            --radius-sm: 0.5rem;
            --radius-md: 1rem;
            --radius-lg: 1.5rem;
            --radius-full: 50%;
            
            /* Z-index layers */
            --z-dropdown: 100;
            --z-sticky: 200;
            --z-modal: 1000;
            --z-popup: 1100;
            --z-tooltip: 1200;
        }
        
        /* Dark Theme Variables */
        [data-theme="dark"] {
            --primary: #E55347;
            --primary-dark: #C32B2B;
            --primary-light: #FF7B6B;
            --secondary: #FFB347;
            --accent: #FFD166;
            --background: #1A1A1A;
            --surface: #2D2D2D;
            --card-bg: #2D2D2D;
            --text-dark: #FFFFFF;
            --text-medium: #CCCCCC;
            --text-light: #999999;
            --border: #404040;
            --shadow: rgba(0, 0, 0, 0.25);
            --shadow-strong: rgba(0, 0, 0, 0.4);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }
        
        body {
            font-family: var(--font-body);
            background-color: var(--background);
            color: var(--text-dark);
            line-height: 1.6;
            overflow-x: hidden;
            transition: background-color var(--transition-medium);
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-family: var(--font-heading);
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: var(--space-md);
        }
        
        h1 { font-size: 3.5rem; }
        h2 { font-size: 2.5rem; }
        h3 { font-size: 1.75rem; }
        h4 { font-size: 1.5rem; }
        
        p { margin-bottom: var(--space-md); }
        
        a {
            color: var(--primary);
            text-decoration: none;
            transition: color var(--transition-fast);
        }
        
        a:hover {
            color: var(--primary-dark);
        }
        
        img {
            max-width: 100%;
            height: auto;
            display: block;
        }
        
        ul, ol {
            padding-left: var(--space-lg);
            margin-bottom: var(--space-md);
        }
        
        button {
            font-family: var(--font-body);
            cursor: pointer;
            border: none;
            background: none;
        }
        
        input, textarea, select {
            font-family: var(--font-body);
            font-size: 1rem;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--space-lg);
        }
        
        .section-padding {
            padding: var(--space-xxl) 0;
        }
        
        /* ===== Utility Classes ===== */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        
        .flex {
            display: flex;
        }
        
        .flex-center {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .flex-between {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .grid {
            display: grid;
        }
        
        .highlight {
            color: var(--primary);
            position: relative;
            display: inline-block;
        }
        
        .highlight::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 30%;
            background-color: var(--accent);
            opacity: 0.3;
            z-index: -1;
            transition: height var(--transition-medium);
        }
        
        .highlight:hover::after {
            height: 40%;
        }
        
        /* ===== Buttons ===== */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            padding: 0.875rem 1.75rem;
            font-weight: 600;
            font-size: 1rem;
            border-radius: var(--radius-md);
            transition: all var(--transition-medium);
            position: relative;
            overflow: hidden;
        }
        
        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: var(--radius-full);
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }
        
        .btn:focus:not(:active)::after {
            animation: ripple 1s ease-out;
        }
        
        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            20% {
                transform: scale(25, 25);
                opacity: 0.3;
            }
            100% {
                opacity: 0;
                transform: scale(40, 40);
            }
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            box-shadow: 0 4px 15px rgba(195, 43, 43, 0.3);
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(195, 43, 43, 0.4);
        }
        
        .btn-secondary {
            background: var(--surface);
            color: var(--text-dark);
            border: 1px solid var(--border);
            box-shadow: 0 2px 8px var(--shadow);
        }
        
        .btn-secondary:hover {
            background: var(--background);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--shadow-strong);
        }
        
        .btn-outline {
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
        }
        
        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }
        
        /* ===== Header & Navigation ===== */
        .professional-header {
            position: sticky;
            top: 0;
            z-index: var(--z-sticky);
            background-color: var(--surface);
            box-shadow: 0 4px 20px var(--shadow);
            transition: all var(--transition-medium);
            backdrop-filter: blur(10px);
        }
        
        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-md) 0;
        }
        
        .logo-section {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            text-decoration: none;
        }
        
        .logo i {
            font-size: 2rem;
            color: var(--primary);
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .logo-text h1 {
            font-size: 1.5rem;
            margin-bottom: 0;
            line-height: 1;
            color: var(--text-dark);
        }
        
        .tagline {
            font-size: 0.75rem;
            font-weight: 500;
            color: var(--text-light);
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        
        .main-nav {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            padding: var(--space-sm) var(--space-md);
            color: var(--text-medium);
            font-weight: 500;
            border-radius: var(--radius-md);
            transition: all var(--transition-fast);
        }
        
        .nav-item:hover, .nav-item.active {
            color: var(--primary);
            background-color: rgba(195, 43, 43, 0.1);
        }
        
        .nav-item i {
            font-size: 1.125rem;
        }
        
        .categories-dropdown {
            position: relative;
        }
        
        .categories-trigger {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            padding: var(--space-sm) var(--space-md);
            color: var(--text-medium);
            font-weight: 500;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-fast);
        }
        
        .categories-trigger:hover {
            color: var(--primary);
            background-color: rgba(195, 43, 43, 0.1);
        }
        
        .categories-menu {
            position: absolute;
            top: 100%;
            left: 0;
            width: 280px;
            background-color: var(--surface);
            border-radius: var(--radius-md);
            box-shadow: 0 10px 40px var(--shadow-strong);
            padding: var(--space-md);
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px);
            transition: all var(--transition-medium);
            z-index: var(--z-dropdown);
        }
        
        .categories-dropdown:hover .categories-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        .category-menu-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-sm);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all var(--transition-fast);
        }
        
        .category-menu-item:hover {
            background-color: var(--background);
            color: var(--primary);
            transform: translateX(5px);
        }
        
        .category-count {
            font-size: 0.875rem;
            color: var(--text-light);
            background-color: var(--background);
            padding: 0.125rem 0.5rem;
            border-radius: var(--radius-full);
        }
        
        .header-actions {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }
        
        .search-box {
            position: relative;
        }
        
        .search-box i {
            position: absolute;
            left: var(--space-md);
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
        }
        
        .search-box input {
            width: 280px;
            padding: 0.75rem var(--space-md) 0.75rem 3rem;
            border-radius: var(--radius-md);
            border: 1px solid var(--border);
            background-color: var(--surface);
            color: var(--text-dark);
            font-size: 0.95rem;
            transition: all var(--transition-fast);
        }
        
        .search-box input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(195, 43, 43, 0.1);
            width: 320px;
        }
        
        .search-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background-color: var(--surface);
            border-radius: var(--radius-md);
            box-shadow: 0 10px 40px var(--shadow-strong);
            margin-top: var(--space-xs);
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px);
            transition: all var(--transition-medium);
            z-index: var(--z-dropdown);
            overflow: hidden;
        }
        
        .search-suggestions.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        .search-suggestion-item {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-md);
            cursor: pointer;
            transition: background-color var(--transition-fast);
            border-bottom: 1px solid var(--border);
        }
        
        .search-suggestion-item:last-child {
            border-bottom: none;
        }
        
        .search-suggestion-item:hover {
            background-color: var(--background);
        }
        
        .search-suggestion-image {
            width: 60px;
            height: 60px;
            border-radius: var(--radius-sm);
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .search-suggestion-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform var(--transition-medium);
        }
        
        .search-suggestion-item:hover .search-suggestion-image img {
            transform: scale(1.1);
        }
        
        .search-suggestion-title {
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: var(--space-xs);
        }
        
        .suggestion-category {
            font-size: 0.875rem;
            color: var(--text-light);
            background-color: var(--background);
            padding: 0.125rem 0.5rem;
            border-radius: var(--radius-full);
            display: inline-block;
        }
        
        .action-buttons {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }
        
        .theme-toggle {
            width: 44px;
            height: 44px;
            border-radius: var(--radius-full);
            background-color: var(--surface);
            border: 1px solid var(--border);
            color: var(--text-medium);
            transition: all var(--transition-fast);
        }
        
        .theme-toggle:hover {
            background-color: var(--background);
            color: var(--primary);
            transform: rotate(15deg);
        }
        
        /* ===== Hero Section ===== */
        .hero-section {
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, var(--background) 0%, #FFFAF0 100%);
            padding: var(--space-xxl) 0;
        }
        
        [data-theme="dark"] .hero-section {
            background: linear-gradient(135deg, #1A1A1A 0%, #2D2D2D 100%);
        }
        
        .hero-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-xxl);
            align-items: center;
        }
        
        .hero-text h1 {
            font-size: 3.5rem;
            line-height: 1.1;
            margin-bottom: var(--space-lg);
            animation: fadeUp 0.8s ease-out;
        }
        
        .hero-text p {
            font-size: 1.125rem;
            color: var(--text-medium);
            margin-bottom: var(--space-xl);
            animation: fadeUp 0.8s ease-out 0.2s both;
        }
        
        .hero-actions {
            animation: fadeUp 0.8s ease-out 0.4s both;
        }
        
        .hero-image {
            position: relative;
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: 0 20px 60px var(--shadow-strong);
            animation: fadeIn 1s ease-out 0.3s both, float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .hero-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(195, 43, 43, 0.1), rgba(255, 179, 71, 0.1));
            z-index: 1;
        }
        
        .hero-image img {
            width: 100%;
            height: 500px;
            object-fit: cover;
            transition: transform var(--transition-slow);
        }
        
        .hero-image:hover img {
            transform: scale(1.05);
        }
        
        /* ===== UPDATED Carousel Sections ===== */
        .featured-section, .top-rated-section {
            position: relative;
            padding: var(--space-xxl) 0;
        }
        
        .section-header {
            text-align: center;
            margin-bottom: var(--space-xl);
            animation: fadeUp 0.8s ease-out;
        }
        
        .section-header p {
            color: var(--text-medium);
            font-size: 1.125rem;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .filter-controls {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            gap: var(--space-md);
            margin-bottom: var(--space-xl);
            padding: var(--space-md);
            background-color: var(--surface);
            border-radius: var(--radius-lg);
            box-shadow: 0 4px 20px var(--shadow);
        }
        
        .filter-tags {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-sm);
        }
        
        .filter-tag {
            display: inline-flex;
            align-items: center;
            padding: 0.5rem 1rem;
            background-color: var(--background);
            color: var(--text-medium);
            border-radius: var(--radius-full);
            font-size: 0.875rem;
            font-weight: 500;
            transition: all var(--transition-fast);
            cursor: pointer;
        }
        
        .filter-tag.active {
            background-color: var(--primary);
            color: white;
        }
        
        .filter-tag:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px var(--shadow);
        }
        
        .clear-filters {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            color: var(--text-light);
            font-size: 0.875rem;
            transition: color var(--transition-fast);
        }
        
        .clear-filters:hover {
            color: var(--primary);
        }
        
        /* ===== UPDATED Carousel Container ===== */
        .featured-container {
            position: relative;
            overflow: hidden;
            padding: 0 60px; /* Space for navigation arrows */
        }
        
        .featured-wrapper {
            display: flex;
            transition: transform 0.5s ease; /* Smooth transition */
            will-change: transform;
            gap: var(--space-lg);
            padding: var(--space-md) 0;
        }
        
        /* ===== Recipe Cards ===== */
        .recipe-card {
            flex: 0 0 320px;
            background-color: var(--card-bg);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: 0 10px 30px var(--shadow);
            transition: all var(--transition-medium);
            position: relative;
            margin-right: var(--space-lg); /* Gap between cards */
        }
        
        .recipe-card:last-child {
            margin-right: 0;
        }
        
        .recipe-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 50px var(--shadow-strong);
        }
        
        .recipe-image {
            position: relative;
            height: 220px;
            overflow: hidden;
        }
        
        .recipe-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform var(--transition-medium);
        }
        
        .recipe-card:hover .recipe-image img {
            transform: scale(1.1);
        }
        
        .recipe-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.7), transparent 40%);
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding: var(--space-lg);
            opacity: 0;
            transition: opacity var(--transition-medium);
        }
        
        .recipe-card:hover .recipe-overlay {
            opacity: 1;
        }
        
        .view-recipe-btn {
            display: inline-flex;
            align-items: center;
            gap: var(--space-sm);
            padding: 0.75rem 1.5rem;
            background-color: var(--primary);
            color: white;
            border-radius: var(--radius-md);
            font-weight: 600;
            transform: translateY(20px);
            transition: all var(--transition-medium);
        }
        
        .recipe-card:hover .view-recipe-btn {
            transform: translateY(0);
        }
        
        .view-recipe-btn:hover {
            background-color: var(--primary-dark);
        }
        
        .recipe-badges {
            position: absolute;
            top: var(--space-md);
            left: var(--space-md);
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-xs);
        }
        
        .badge {
            padding: 0.25rem 0.75rem;
            background-color: var(--surface);
            color: var(--text-dark);
            border-radius: var(--radius-full);
            font-size: 0.75rem;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .badge.fried { background-color: #FFB347; color: #5A3711; }
        .badge.baked { background-color: #FFD166; color: #5A4511; }
        .badge.grilled { background-color: #EF8354; color: #5A2711; }
        .badge.soup { background-color: #7FB685; color: #0F3A14; }
        .badge.healthy { background-color: #06D6A0; color: #004D36; }
        .badge.traditional { background-color: #9B5DE5; color: #2E0B5A; }
        .badge.spicy { background-color: #F15BB5; color: #5A0B3D; }
        .badge.quick { background-color: #00BBF9; color: #003A5A; }
        
        .save-recipe {
            position: absolute;
            top: var(--space-md);
            right: var(--space-md);
            width: 40px;
            height: 40px;
            border-radius: var(--radius-full);
            background-color: var(--surface);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-light);
            font-size: 1.25rem;
            cursor: pointer;
            transition: all var(--transition-medium);
            z-index: 2;
        }
        
        .save-recipe:hover {
            color: var(--primary);
            transform: scale(1.1);
        }
        
        .save-recipe.active {
            color: var(--primary);
            animation: pulse 0.5s ease;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .rating-badge {
            position: absolute;
            bottom: var(--space-md);
            right: var(--space-md);
            background-color: var(--primary);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: var(--radius-full);
            font-weight: 600;
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }
        
        .recipe-content {
            padding: var(--space-lg);
        }
        
        .recipe-title {
            font-size: 1.25rem;
            margin-bottom: var(--space-sm);
            color: var(--text-dark);
        }
        
        .recipe-description {
            color: var(--text-medium);
            font-size: 0.95rem;
            margin-bottom: var(--space-lg);
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .recipe-rating-section {
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
        }
        
        .rating-label {
            font-size: 0.875rem;
            color: var(--text-light);
        }
        
        .star-rating {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }
        
        .star {
            color: var(--border);
            font-size: 1.25rem;
            cursor: pointer;
            transition: color var(--transition-fast), transform var(--transition-fast);
        }
        
        .star:hover, .star.selected {
            color: var(--accent);
            transform: scale(1.2);
        }
        
        .selected-rating {
            font-size: 0.875rem;
            color: var(--text-light);
            margin-left: var(--space-sm);
        }
        
        .rate-btn {
            align-self: flex-start;
            padding: 0.5rem 1rem;
            background-color: var(--surface);
            color: var(--text-dark);
            border-radius: var(--radius-md);
            font-size: 0.875rem;
            font-weight: 600;
            border: 1px solid var(--border);
            transition: all var(--transition-fast);
        }
        
        .rate-btn:hover:not(:disabled) {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        .rate-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .user-has-rated {
            font-size: 0.875rem;
            color: var(--success);
            font-weight: 600;
        }
        
        /* ===== UPDATED Scroll Navigation ===== */
        .scroll-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 48px;
            height: 48px;
            border-radius: var(--radius-full);
            background-color: var(--surface);
            color: var(--text-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px var(--shadow-strong);
            cursor: pointer;
            transition: all var(--transition-fast);
            z-index: 2;
            opacity: 1; /* Always visible */
        }
        
        .scroll-nav:hover {
            background-color: var(--primary);
            color: white;
            transform: translateY(-50%) scale(1.1);
        }
        
        .scroll-nav.disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }
        
        .scroll-nav.disabled:hover {
            background-color: var(--surface);
            color: var(--text-dark);
            transform: translateY(-50%) scale(1);
        }
        
        .scroll-nav.prev {
            left: 0;
        }
        
        .scroll-nav.next {
            right: 0;
        }
        
        .show-more-container {
            text-align: center;
            margin-top: var(--space-xl);
            animation: fadeUp 0.8s ease-out 0.3s both;
        }
        
        .show-more-btn {
            padding: 1rem 2rem;
            font-size: 1.125rem;
        }
        
        /* ===== Ad Containers ===== */
        .ad-container {
            padding: var(--space-xl) 0;
        }
        
        .ad-placeholder {
            background: linear-gradient(135deg, var(--surface), var(--background));
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            text-align: center;
            border: 2px dashed var(--border);
            transition: all var(--transition-medium);
        }
        
        .ad-placeholder:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px var(--shadow);
        }
        
        .ad-placeholder i {
            font-size: 3rem;
            color: var(--text-light);
            margin-bottom: var(--space-md);
        }
        
        .ad-placeholder h4 {
            color: var(--text-dark);
            margin-bottom: var(--space-xs);
        }
        
        .ad-placeholder p {
            color: var(--text-light);
            font-size: 0.875rem;
        }
        
        .ad-placeholder.small {
            padding: var(--space-lg);
        }
        
        .ad-placeholder.small i {
            font-size: 2rem;
        }
        
        /* ===== Recipe Ad Overlay ===== */
        .recipe-ad-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: var(--z-modal);
            opacity: 0;
            visibility: hidden;
            transition: all var(--transition-medium);
        }
        
        .recipe-ad-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        
        .recipe-ad-container {
            width: 90%;
            max-width: 800px;
            background-color: var(--surface);
            border-radius: var(--radius-lg);
            overflow: hidden;
            position: relative;
            transform: scale(0.9);
            transition: transform var(--transition-medium);
        }
        
        .recipe-ad-overlay.show .recipe-ad-container {
            transform: scale(1);
        }
        
        .video-container {
            position: relative;
            width: 100%;
            height: 450px;
            background-color: #000;
        }
        
        .video-container video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .ad-loading {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
        }
        
        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: var(--radius-full);
            border-top-color: var(--primary);
            animation: spin 1s linear infinite;
            margin-bottom: var(--space-md);
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .recipe-skip-button {
            position: absolute;
            bottom: var(--space-lg);
            right: var(--space-lg);
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius-md);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            transition: all var(--transition-fast);
        }
        
        .recipe-skip-button:not(:disabled):hover {
            background-color: var(--primary);
        }
        
        .recipe-skip-button:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }
        
        .recipe-skip-timer {
            background-color: var(--primary);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
        }
        
        .ad-marker {
            position: absolute;
            top: var(--space-md);
            left: var(--space-md);
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: var(--radius-md);
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }
        
        /* ===== Newsletter Section ===== */
        .newsletter-section {
            background: linear-gradient(135deg, #2b53c3, var(--primary-dark));
            color: white;
            padding: var(--space-xxl) 0;
            position: relative;
            overflow: hidden;
        }
        
        .newsletter-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000" opacity="0.1"><path fill="white" d="M500,200Q400,300,300,200Q200,100,300,0Q400-100,500,0Q600-100,700,0Q800,100,700,200Q600,300,500,200Z"/></svg>');
            background-size: 300px;
        }
        
        .newsletter-content {
            position: relative;
            z-index: 1;
            text-align: center;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .newsletter-text h2 {
            color: white;
            margin-bottom: var(--space-md);
        }
        
        .newsletter-text p {
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: var(--space-xl);
        }
        
        .form-group {
            display: flex;
            gap: var(--space-sm);
            max-width: 500px;
            margin: 0 auto;
        }
        
        .form-group input {
            flex: 1;
            padding: 1rem 1.5rem;
            border-radius: var(--radius-md);
            border: none;
            font-size: 1rem;
            background-color: rgba(255, 255, 255, 0.95);
        }
        
        .form-group input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.3);
        }
        
        .form-group button {
            padding: 1rem 2rem;
            background-color: var(--secondary);
            color: var(--text-dark);
            font-weight: 600;
            border-radius: var(--radius-md);
            transition: all var(--transition-fast);
        }
        
        .form-group button:hover {
            background-color: white;
            transform: translateY(-2px);
        }
        
        /* ===== Footer ===== */
        .professional-footer {
            background-color: var(--surface);
            padding: var(--space-xxl) 0 var(--space-lg);
            border-top: 1px solid var(--border);
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--space-xxl);
            margin-bottom: var(--space-xl);
        }
        
        .footer-section h4 {
            margin-bottom: var(--space-lg);
            color: var(--text-dark);
        }
        
        .footer-links {
            list-style: none;
            padding: 0;
        }
        
        .footer-links li {
            margin-bottom: var(--space-sm);
        }
        
        .footer-links a {
            color: var(--text-medium);
            transition: color var(--transition-fast);
        }
        
        .footer-links a:hover {
            color: var(--primary);
        }
        
        .footer-bottom {
            text-align: center;
            padding-top: var(--space-lg);
            border-top: 1px solid var(--border);
            color: var(--text-light);
            font-size: 0.875rem;
        }
        
        /* ===== Floating Ad ===== */
        .floating-ad-container {
            position: fixed;
            bottom: var(--space-xl);
            right: var(--space-xl);
            z-index: var(--z-popup);
            transform: translateY(100px);
            opacity: 0;
            transition: all var(--transition-medium);
        }
        
        .floating-ad-container.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        .floating-ad-content {
            position: relative;
            background-color: var(--surface);
            border-radius: var(--radius-md);
            box-shadow: 0 10px 40px var(--shadow-strong);
            overflow: hidden;
            width: 280px;
        }
        
        .close-ad {
            position: absolute;
            top: var(--space-sm);
            right: var(--space-sm);
            width: 28px;
            height: 28px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            cursor: pointer;
            transition: background-color var(--transition-fast);
        }
        
        .close-ad:hover {
            background-color: var(--primary);
        }
        
        /* ===== Back to Top Button ===== */
        .back-to-top {
            position: fixed;
            bottom: var(--space-xl);
            right: var(--space-xl);
            width: 50px;
            height: 50px;
            background-color: var(--primary);
            color: white;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transform: translateY(20px);
            transition: all var(--transition-medium);
            z-index: var(--z-sticky);
            box-shadow: 0 4px 15px rgba(195, 43, 43, 0.3);
        }
        
        .back-to-top.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        .back-to-top:hover {
            background-color: var(--primary-dark);
            transform: translateY(-5px);
        }
        
        /* ===== Newsletter Popup ===== */
        .newsletter-popup {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: var(--z-popup);
            opacity: 0;
            visibility: hidden;
            transition: all var(--transition-medium);
        }
        
        .newsletter-popup.show {
            opacity: 1;
            visibility: visible;
        }
        
        .popup-content {
            background-color: var(--surface);
            border-radius: var(--radius-lg);
            padding: var(--space-xxl);
            max-width: 500px;
            width: 90%;
            position: relative;
            transform: scale(0.9);
            transition: transform var(--transition-medium);
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        .newsletter-popup.show .popup-content {
            transform: scale(1);
        }
        
        .close-popup {
            position: absolute;
            top: var(--space-lg);
            right: var(--space-lg);
            width: 36px;
            height: 36px;
            background-color: var(--background);
            color: var(--text-dark);
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all var(--transition-fast);
        }
        
        .close-popup:hover {
            background-color: var(--primary);
            color: white;
        }
        
        .popup-content h2 {
            margin-bottom: var(--space-md);
            color: var(--text-dark);
        }
        
        .popup-content p {
            color: var(--text-medium);
            margin-bottom: var(--space-xl);
        }
        
        .popup-form {
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
        }
        
        .popup-form input {
            padding: 1rem 1.5rem;
            border-radius: var(--radius-md);
            border: 1px solid var(--border);
            background-color: var(--background);
            color: var(--text-dark);
            font-size: 1rem;
        }
        
        .popup-form input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(195, 43, 43, 0.1);
        }
        
        .popup-form button {
            padding: 1rem;
            background-color: var(--primary);
            color: white;
            font-weight: 600;
            border-radius: var(--radius-md);
            transition: all var(--transition-fast);
        }
        
        .popup-form button:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        /* ===== Animations ===== */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes fadeUp {
            from { 
                opacity: 0;
                transform: translateY(20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* ===== Responsive Design ===== */
        @media (max-width: 1024px) {
            .hero-content {
                grid-template-columns: 1fr;
                text-align: center;
                gap: var(--space-xl);
            }
            
            h1 { font-size: 3rem; }
            h2 { font-size: 2.25rem; }
            
            .search-box input {
                width: 240px;
            }
            
            .search-box input:focus {
                width: 280px;
            }
            
            .recipe-card {
                flex: 0 0 300px;
            }
            
            .featured-container {
                padding: 0 50px;
            }
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-wrap: wrap;
                gap: var(--space-md);
            }
            
            .main-nav {
                order: 3;
                width: 100%;
                justify-content: center;
                margin-top: var(--space-md);
            }
            
            .search-box input {
                width: 200px;
            }
            
            .search-box input:focus {
                width: 240px;
            }
            
            h1 { font-size: 2.5rem; }
            h2 { font-size: 2rem; }
            
            .hero-image {
                height: 300px;
            }
            
            .recipe-card {
                flex: 0 0 280px;
            }
            
            .form-group {
                flex-direction: column;
            }
            
            .floating-ad-container {
                right: var(--space-md);
                bottom: var(--space-md);
            }
            
            .back-to-top {
                right: var(--space-md);
                bottom: var(--space-md);
            }
            
            .featured-container {
                padding: 0 40px;
            }
            
            .scroll-nav {
                width: 40px;
                height: 40px;
            }
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 0 var(--space-md);
            }
            
            .section-padding {
                padding: var(--space-xl) 0;
            }
            
            h1 { font-size: 2rem; }
            h2 { font-size: 1.75rem; }
            
            .header-actions {
                flex-direction: column;
                align-items: flex-end;
                gap: var(--space-sm);
            }
            
            .search-box input {
                width: 180px;
            }
            
            .search-box input:focus {
                width: 220px;
            }
            
            .recipe-card {
                flex: 0 0 260px;
            }
            
            .filter-controls {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .popup-content {
                padding: var(--space-xl) var(--space-lg);
            }
            
            .featured-container {
                padding: 0 30px;
            }
        }
        
        /* ===== Notification Styles ===== */
        .import-notification {
            position: fixed;
            top: var(--space-xl);
            right: var(--space-xl);
            background-color: var(--surface);
            color: var(--text-dark);
            padding: var(--space-md) var(--space-lg);
            border-radius: var(--radius-md);
            box-shadow: 0 10px 30px var(--shadow-strong);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: var(--space-lg);
            z-index: var(--z-tooltip);
            animation: slideInRight 0.3s ease-out;
            max-width: 400px;
        }
        
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .import-notification-success {
            border-left: 4px solid var(--success);
        }
        
        .import-notification-error {
            border-left: 4px solid var(--error);
        }
        
        .import-notification-info {
            border-left: 4px solid var(--info);
        }
        
        /* ===== No Recipes State ===== */
        .no-recipes-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: var(--space-xxl) var(--space-lg);
            text-align: center;
            color: var(--text-medium);
            min-height: 300px;
        }
        
        .no-recipes-state i {
            font-size: 4rem;
            color: var(--border);
            margin-bottom: var(--space-lg);
        }
        
        .no-recipes-state h3 {
            color: var(--text-dark);
            margin-bottom: var(--space-sm);
        }
        
        .no-recipes-state p {
            color: var(--text-light);
            margin-bottom: var(--space-xl);
            max-width: 400px;
        }
        /* Add Krabby Patty special styles */
        .badge.krabby-patty {
            background: linear-gradient(135deg, #FFD700, #FF6B35);
            color: #000;
            font-weight: 700;
            border: 2px solid #FF6B35;
            box-shadow: 0 2px 4px rgba(255, 107, 53, 0.3);
        }
        
        .category-menu-item.krabby-patty-item {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 107, 53, 0.1));
            border-left: 3px solid #FFD700;
        }
        
        .category-menu-item.krabby-patty-item .category-count {
            background: linear-gradient(135deg, #FFD700, #FF6B35);
            color: #000;
            font-weight: 600;
        }
        
        .filter-tag.krabby-patty-tag {
            background: linear-gradient(135deg, #FFD700, #FF6B35);
            color: #000;
            border: none;
            font-weight: 600;
        }
        
        .filter-tag.krabby-patty-tag:hover {
            background: linear-gradient(135deg, #FF6B35, #FFD700);
        }
        
        /* Special recipe card for Krabby Patty */
        .recipe-card.krabby-patty-card {
            border: 2px solid #FFD700;
            box-shadow: 0 4px 12px rgba(255, 215, 0, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .recipe-card.krabby-patty-card::before {
            content: " SECRET FORMULA ";
            position: absolute;
            top: 10px;
            right: -30px;
            background: linear-gradient(135deg, #FFD700, #FF6B35);
            color: #000;
            padding: 4px 30px;
            font-size: 0.7rem;
            font-weight: 700;
            transform: rotate(45deg);
            z-index: 2;
            letter-spacing: 1px;
        }
        /* Add this new CSS for the search suggestions container */
        .search-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin-top: 8px;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            max-height: 400px; /* Maximum height for the dropdown */
            overflow-y: auto; /* Enable vertical scrolling */
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }

        .search-suggestions.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        /* Custom scrollbar styling for the search suggestions */
        .search-suggestions::-webkit-scrollbar {
            width: 8px;
        }

        .search-suggestions::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        .search-suggestions::-webkit-scrollbar-thumb {
            background: #c0c0c0;
            border-radius: 4px;
        }

        .search-suggestions::-webkit-scrollbar-thumb:hover {
            background: #a0a0a0;
        }

        /* For Firefox */
        .search-suggestions {
            scrollbar-width: thin;
            scrollbar-color: #c0c0c0 #f1f1f1;
        }

        .search-suggestion-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            border-bottom: 1px solid #f0f0f0;
        }

        .search-suggestion-item:last-child {
            border-bottom: none;
        }

        .search-suggestion-item:hover {
            background-color: #f8f8f8;
        }

        .search-suggestion-image {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            overflow: hidden;
            flex-shrink: 0;
        }

        .search-suggestion-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .search-suggestion-content {
            flex: 1;
            min-width: 0;
        }

        .search-suggestion-title {
            font-weight: 500;
            color: #333;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .suggestion-category {
            font-size: 0.875rem;
            color: #666;
        }

        /* Dark theme support */
        [data-theme="dark"] .search-suggestions {
            background: #2d2d2d;
            border-color: #404040;
        }

        [data-theme="dark"] .search-suggestion-item {
            border-bottom-color: #404040;
        }

        [data-theme="dark"] .search-suggestion-item:hover {
            background-color: #3a3a3a;
        }

        [data-theme="dark"] .search-suggestion-title {
            color: #e0e0e0;
        }

        [data-theme="dark"] .suggestion-category {
            color: #a0a0a0;
        }

        [data-theme="dark"] .search-suggestions::-webkit-scrollbar-track {
            background: #1a1a1a;
        }

        [data-theme="dark"] .search-suggestions::-webkit-scrollbar-thumb {
            background: #555;
        }

        [data-theme="dark"] .search-suggestions::-webkit-scrollbar-thumb:hover {
            background: #666;
        }

        /* Make sure search box has relative positioning */
        .search-box {
            position: relative;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .search-suggestions {
                max-height: 300px; /* Smaller max height on mobile */
            }
        }
    </style>
</head>
<body>
    <!-- Recipe Ad Overlay -->
    <div class="recipe-ad-overlay" id="recipeAdOverlay">
        <div class="recipe-ad-container" id="recipeAdContainer">
            <div class="video-container" id="recipeVideoContainer">
                <video id="recipeAdVideo" preload="metadata" playsinline>
                    <!-- Video source will be loaded dynamically -->
                </video>
                <div class="ad-loading" id="recipeAdLoading">
                    <div class="spinner"></div>
                    <p>Loading advertisement...</p>
                </div>
            </div>
            
            <!-- Skip Button for Recipe Ad -->
            <button class="recipe-skip-button" id="recipeSkipButton" disabled onclick="skipRecipeAd()">
                <span class="recipe-skip-timer" id="recipeSkipTimer">8</span>
                Skip Ad
            </button>
            
            <!-- Ad marker -->
            <div class="ad-marker">
                <i class="fas fa-ad"></i> Advertisement
            </div>
        </div>
    </div>

    <!-- Professional Header -->
    <header class="professional-header">
        <div class="container">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo">
                        <i class="fas fa-utensils"></i>
                        <div class="logo-text">
                            <h1>BestChickenRecipes</h1>
                            <span class="tagline">Culinary Excellence</span>
                        </div>
                    </div>
                </div>
                
                <nav class="main-nav">
                    <a href="index.html" class="nav-item active">
                        <i class="fas fa-home"></i>
                        <span>Home</span>
                    </a>
                    <a href="favorites.html" class="nav-item">
                        <i class="fas fa-heart"></i>
                        <span>Favorites</span>
                    </a>
                    <div class="categories-dropdown">
                        <div class="categories-trigger">
                            <i class="fas fa-list"></i>
                            <span>Categories</span>
                            <i class="fas fa-chevron-down" style="font-size: 0.875rem;"></i>
                        </div>
                        <div class="categories-menu" id="categoriesMenu">
                            <!-- Categories will be populated by JavaScript -->
                        </div>
                    </div>
                </nav>

                <div class="header-actions">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Search recipes..." id="searchInput" aria-label="Search recipes">
                        <div class="search-suggestions" id="searchSuggestions">
                            <!-- Search suggestions will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <div class="import-container" style="position: relative;">
                        <input type="file" id="importRecipesFile" accept=".json" 
                                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer;"
                                aria-label="Import recipes file">
                        </div>
                        
                        <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                            <i class="fas fa-moon"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <div class="hero-content">
                <div class="hero-text">
                    <h1>Master the Art of <span class="highlight">Chicken Cooking</span></h1>
                    <p>Discover professional recipes, expert techniques, and step-by-step guides for perfect chicken dishes every time.</p>
                    <div class="hero-actions">
                        <a href="recipes.html" class="btn btn-primary">
                            <i class="fas fa-book-open"></i>
                            Explore Recipes
                        </a>
                    </div>
                </div>
                <div class="hero-image">
                    <img src="daniel-hooper-PaaboPF3dVY-unsplash (1).jpg" 
                        alt="Professional Chicken Cooking" loading="lazy">
                </div>
            </div>
        </div>
    </section>

    <!-- Ad Container 1: Top Banner -->
    <section class="ad-container top-banner-ad">
        <div class="container">
            <div class="ad-placeholder">
                <i class="fas fa-ad"></i>
                <h4>Google Ad Space</h4>
                <p>Top banner ad - 728x90</p>
            </div>
        </div>
    </section>

    <!-- Featured Recipes Section - HORIZONTAL SCROLL -->
    <section class="featured-section">
        <div class="container">
            <div class="filter-controls" id="filterControls">
                <div class="filter-tags" id="filterTags">
                    <!-- Filter tags will be populated by JavaScript -->
                </div>
                <button class="clear-filters" onclick="clearFilters()">
                    <i class="fas fa-times"></i>
                    Clear Filters
                </button>
            </div>
            
            <div class="section-header">
                <h2 id="sectionTitle">Featured Recipes</h2>
                <p id="sectionSubtitle">Handpicked by our culinary experts</p>
            </div>

            <div class="featured-container">
                <div class="scroll-nav prev" id="scrollPrevFeatured">
                    <i class="fas fa-chevron-left"></i>
                </div>
                <div class="featured-wrapper" id="featuredRecipesWrapper">
                    <!-- Recipes loaded by JavaScript -->
                </div>
                <div class="scroll-nav next" id="scrollNextFeatured">
                    <i class="fas fa-chevron-right"></i>
                </div>
            </div>
            
            <!-- Show More Button -->
            <div class="show-more-container" id="featuredShowMore">
                <a href="recipes.html?category=featured" class="btn btn-primary show-more-btn">
                    <span>View All Featured Recipes</span>
                    <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </div>
    </section>

    <!-- Ad Container 2: Middle Rectangle -->
    <section class="ad-container rectangle-ad">
        <div class="container">
            <div class="ad-placeholder">
                <i class="fas fa-ad"></i>
                <h4>Google Ad Space</h4>
                <p>Medium rectangle - 300x250</p>
            </div>
        </div>
    </section>

    <!-- Top Rated Recipes Section - HORIZONTAL SCROLL -->
    <section class="top-rated-section">
        <div class="container">
            <div class="section-header">
                <h2>Top Rated Recipes</h2>
                <p>Highest rated by our community</p>
            </div>

            <div class="featured-container">
                <div class="scroll-nav prev" id="scrollPrevTopRated">
                    <i class="fas fa-chevron-left"></i>
                </div>
                <div class="featured-wrapper" id="topRatedRecipesWrapper">
                    <!-- Top rated recipes will be populated by JavaScript -->
                </div>
                <div class="scroll-nav next" id="scrollNextTopRated">
                    <i class="fas fa-chevron-right"></i>
                </div>
            </div>
            
            <!-- Show More Button -->
            <div class="show-more-container" id="topRatedShowMore">
                <a href="recipes.html?sort=rating" class="btn btn-primary show-more-btn">
                    <span>View All Top Rated Recipes</span>
                    <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </div>
    </section>

    <!-- Ad Container 3: Bottom Banner -->
    <section class="ad-container bottom-banner-ad">
        <div class="container">
            <div class="ad-placeholder">
                <i class="fas fa-ad"></i>
                <h4>Google Ad Space</h4>
                <p>Bottom banner ad - 728x90</p>
            </div>
        </div>
    </section>

    <!-- Newsletter Section -->
    <section class="newsletter-section">
        <div class="container">
            <div class="newsletter-content">
                <div class="newsletter-text">
                    <h2>Join Our Cooking Community</h2>
                    <p>Get weekly recipes, cooking tips, and exclusive content delivered to your inbox.</p>
                </div>
                <div class="newsletter-form">
                    <div class="form-group">
                        <input type="email" placeholder="Enter your email" aria-label="Email for newsletter subscription">
                        <button class="btn btn-primary">Subscribe</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="professional-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="logo">
                        <i class="fas fa-utensils"></i>
                        <div class="logo-text">
                            <h3>BestChickenRecipes</h3>
                            <span>Premium Culinary Guides</span>
                        </div>
                    </div>
                    <p>Your trusted source for professional chicken recipes and cooking techniques.</p>
                </div>

                <div class="footer-section">
                    <h4>Contact</h4>
                    <ul class="footer-links">
                        <li><a href="mailto:contact@bestchickenrecipe.com">Email Us</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                    </ul>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; 2023 BestChickenRecipes. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Floating Ad -->
    <div class="floating-ad-container" id="floatingAd">
        <div class="floating-ad-content">
            <div class="ad-placeholder small">
                <i class="fas fa-ad"></i>
                <h4>Google Ad Space</h4>
                <p>Floating Ad</p>
            </div>
            <span class="close-ad" onclick="closeFloatingAd()" role="button" tabindex="0" aria-label="Close ad"></span>
        </div>
    </div>

    <!-- Back to Top Button -->
    <div class="back-to-top" id="backToTop" role="button" tabindex="0" aria-label="Back to top">
        <i class="fas fa-arrow-up"></i>
    </div>

    <!-- Newsletter Popup -->
    <div class="newsletter-popup" id="newsletterPopup">
        <div class="popup-content">
            <span class="close-popup" id="closePopup" role="button" tabindex="0" aria-label="Close popup"></span>
            <h2>Join Our Cooking Community</h2>
            <p>Subscribe to get exclusive recipes, cooking tips, and special offers delivered straight to your inbox.</p>
            <form class="popup-form">
                <input type="text" placeholder="Your Name" aria-label="Your name">
                <input type="email" placeholder="Your Email" required aria-label="Your email">
                <button type="submit" class="btn btn-primary">Subscribe Now</button>
            </form>
        </div>
    </div>
<script>
    // ===== CONFIGURATION & INITIALIZATION =====
let recipes = JSON.parse(localStorage.getItem('chickenRecipes')) || [];
let recipeRatings = JSON.parse(localStorage.getItem('recipeRatings')) || {};
let userRatings = JSON.parse(localStorage.getItem('userRatings')) || {};

let recipeSkipTimer;
let recipeSkipCountdown = 8;
let isRecipeAdShowing = false;
let targetRecipeUrl = null;
let recipeAdVideoElement = null;

const allCategories = [
    { id: 'fried', name: 'Fried', icon: 'fas fa-fire' },
    { id: 'baked', name: 'Baked', icon: 'fas fa-oven' },
    { id: 'grilled', name: 'Grilled', icon: 'fas fa-grill' },
    { id: 'soup', name: 'Soup', icon: 'fas fa-bowl-food' },
    { id: 'healthy', name: 'Healthy', icon: 'fas fa-heart' },
    { id: 'traditional', name: 'Traditional', icon: 'fas fa-landmark' },
    { id: 'spicy', name: 'Spicy', icon: 'fas fa-pepper-hot' },
    { id: 'quick', name: 'Quick', icon: 'fas fa-bolt' },
    { id: 'krabby-patty', name: 'Krabby Patty', icon: 'fas fa-hamburger' }
];

let currentFilters = [];
let currentSearchTerm = '';

const carouselStates = {
    featured: { currentPosition: 0, autoScrollInterval: null, isHovering: false },
    topRated: { currentPosition: 0, autoScrollInterval: null, isHovering: false }
};

// ===== DOM ELEMENTS =====
const featuredRecipesWrapper = document.getElementById('featuredRecipesWrapper');
const topRatedRecipesWrapper = document.getElementById('topRatedRecipesWrapper');
const searchInput = document.getElementById('searchInput');
const searchSuggestionsContainer = document.getElementById('searchSuggestions');
const themeToggle = document.getElementById('themeToggle');
const backToTop = document.getElementById('backToTop');
const floatingAd = document.getElementById('floatingAd');
const newsletterPopup = document.getElementById('newsletterPopup');
const closePopup = document.getElementById('closePopup');
const filterTagsContainer = document.getElementById('filterTags');
const categoriesMenu = document.getElementById('categoriesMenu');
const sectionTitle = document.getElementById('sectionTitle');
const sectionSubtitle = document.getElementById('sectionSubtitle');
const scrollPrevFeatured = document.getElementById('scrollPrevFeatured');
const scrollNextFeatured = document.getElementById('scrollNextFeatured');
const scrollPrevTopRated = document.getElementById('scrollPrevTopRated');
const scrollNextTopRated = document.getElementById('scrollNextTopRated');

// ===== INITIALIZATION =====
document.addEventListener('DOMContentLoaded', function() {
    loadRecipes();
    loadFeaturedRecipes();
    loadTopRatedRecipes();
    populateCategoriesMenu();
    initializeSearch();
    initializeThemeToggle();
    initializeScrollEvents();
    initializeAdSystem();
    initializeScrollNavigation();
    
    setTimeout(() => floatingAd.classList.add('show'), 3000);
    setTimeout(() => {
        if (!localStorage.getItem('newsletterShown')) {
            newsletterPopup.classList.add('show');
            localStorage.setItem('newsletterShown', 'true');
        }
    }, 15000);
    
    const importFileInput = document.getElementById('importRecipesFile');
    if (importFileInput) importFileInput.addEventListener('change', importRecipesFromFile);
    
    initializeKeyboardNavigation();
    initializeAutoScroll();
});

// ===== RECIPE MANAGEMENT =====
function loadRecipes() {
    const storedRecipes = JSON.parse(localStorage.getItem('chickenRecipes')) || [];
    const sampleTitles = ['Crispy Fried Chicken', 'Garlic Butter Baked Chicken', 'Spicy Grilled Chicken', 'Creamy Chicken Soup', 'Honey Mustard Chicken', 'Chicken Tikka Masala'];
    
    recipes = storedRecipes.filter(recipe => !sampleTitles.includes(recipe.title));
    
    recipes = recipes.map(recipe => {
        if (recipe.title && recipe.title.toLowerCase().includes('krabby patty')) {
            if (recipe.badges && !recipe.badges.includes('krabby-patty')) {
                recipe.badges.push('krabby-patty');
            } else if (!recipe.badges) {
                recipe.badges = ['krabby-patty', 'funny'];
            }
        }
        return recipe;
    });
    
    localStorage.setItem('chickenRecipes', JSON.stringify(recipes));
}

function loadFeaturedRecipes() {
    featuredRecipesWrapper.innerHTML = '';
    
    if (recipes.length === 0) {
        featuredRecipesWrapper.innerHTML = `
            <div class="no-recipes-state">
                <i class="fas fa-utensils"></i>
                <h3>No Recipes Yet</h3>
                <p>Import your chicken recipes to get started.</p>
                <button class="btn btn-primary" onclick="document.getElementById('importRecipesFile').click()">
                    <i class="fas fa-file-import"></i>
                    Import Your First Recipe
                </button>
            </div>
        `;
        carouselStates.featured.currentPosition = 0;
        updateNavButtons('featured');
        return;
    }
    
    let filteredRecipes = [...recipes];
    
    if (currentFilters.length > 0) {
        filteredRecipes = filteredRecipes.filter(recipe => 
            recipe.badges && recipe.badges.some(badge => currentFilters.includes(badge))
        );
    }
    
    if (currentSearchTerm) {
        const searchLower = currentSearchTerm.toLowerCase();
        filteredRecipes = filteredRecipes.filter(recipe => 
            recipe.title.toLowerCase().includes(searchLower) ||
            recipe.description.toLowerCase().includes(searchLower)
        );
    }
    
    if (filteredRecipes.length === 0) {
        featuredRecipesWrapper.innerHTML = `
            <div class="no-recipes-state">
                <i class="fas fa-search"></i>
                <h3>No Recipes Found</h3>
                <p>Try different filters or search terms</p>
                <button class="btn btn-primary" onclick="clearFilters()">
                    <i class="fas fa-times"></i>
                    Clear Filters
                </button>
            </div>
        `;
        carouselStates.featured.currentPosition = 0;
        updateNavButtons('featured');
        return;
    }
    
    filteredRecipes.forEach((recipe) => {
        const recipeCard = createRecipeCard(recipe, 'featured');
        featuredRecipesWrapper.appendChild(recipeCard);
    });
    
    updateFilterTags();
    updateSectionTitle();
    
    setTimeout(() => {
        carouselStates.featured.currentPosition = 0;
        featuredRecipesWrapper.style.transform = 'translateX(0)';
        updateNavButtons('featured');
        startAutoScroll('featured');
    }, 100);
}

function loadTopRatedRecipes() {
    topRatedRecipesWrapper.innerHTML = '';
    const ratedRecipes = recipes.filter(recipe => recipeRatings[recipe.id]);
    
    if (ratedRecipes.length === 0) {
        topRatedRecipesWrapper.innerHTML = `
            <div class="no-recipes-state">
                <i class="fas fa-star"></i>
                <h3>No Ratings Yet</h3>
                <p>Rate recipes to see them here!</p>
            </div>
        `;
        carouselStates.topRated.currentPosition = 0;
        updateNavButtons('topRated');
        return;
    }
    
    const sortedRecipes = ratedRecipes.sort((a, b) => {
        const ratingA = recipeRatings[a.id]?.average || 0;
        const ratingB = recipeRatings[b.id]?.average || 0;
        return ratingB - ratingA;
    });
    
    const topRecipes = sortedRecipes.slice(0, 10);
    
    topRecipes.forEach((recipe) => {
        const recipeCard = createRecipeCard(recipe, 'topRated');
        topRatedRecipesWrapper.appendChild(recipeCard);
    });
    
    setTimeout(() => {
        carouselStates.topRated.currentPosition = 0;
        topRatedRecipesWrapper.style.transform = 'translateX(0)';
        updateNavButtons('topRated');
        startAutoScroll('topRated');
    }, 100);
}

function createRecipeCard(recipe, section) {
    const isKrabbyPatty = recipe.badges && recipe.badges.includes('krabby-patty');
    const card = document.createElement('div');
    card.className = `recipe-card ${isKrabbyPatty ? 'krabby-patty-card' : ''}`;
    card.setAttribute('role', 'article');
    card.setAttribute('aria-label', `${recipe.title} - ${recipe.description}`);
    
    const ratingData = recipeRatings[recipe.id];
    const averageRating = ratingData?.average || 0;
    const ratingCount = ratingData?.count || 0;
    const userRating = userRatings[recipe.id] || 0;
    const hasUserRated = userRating > 0;
    
    const badges = recipe.badges ? recipe.badges.map(badge => {
        let badgeClass = badge;
        if (badge === 'krabby-patty') badgeClass = 'krabby-patty';
        return `<span class="badge ${badgeClass}">${badge === 'krabby-patty' ? ' Krabby Patty ' : badge.charAt(0).toUpperCase() + badge.slice(1)}</span>`;
    }).join('') : '';
    
    card.innerHTML = `
        <div class="recipe-image">
            <img src="${recipe.image}" alt="${recipe.title}" loading="lazy">
            <div class="recipe-overlay">
                <a href="#" class="view-recipe-btn" onclick="handleRecipeClick(${recipe.id}, event)" aria-label="View ${recipe.title} recipe">
                    <i class="fas fa-utensils"></i>
                    View Recipe
                </a>
            </div>
            ${badges ? `<div class="recipe-badges">${badges}</div>` : ''}
            ${section === 'topRated' && ratingCount > 0 ? `
                <div class="rating-badge">
                    ${averageRating.toFixed(1)}
                </div>
            ` : ''}
            <button class="save-recipe ${recipe.saved ? 'active' : ''}" onclick="toggleSaveRecipe(${recipe.id}, event)" aria-label="${recipe.saved ? 'Remove from saved' : 'Save recipe'}">
                <i class="fas fa-heart"></i>
            </button>
        </div>
        <div class="recipe-content">
            <h3 class="recipe-title">
                ${isKrabbyPatty ? ' ' : ''}${recipe.title}${isKrabbyPatty ? ' ' : ''}
            </h3>
            <p class="recipe-description">${recipe.description}</p>
            
            ${section === 'featured' ? `
                <div class="recipe-rating-section">
                    <span class="rating-label">Rate this recipe:</span>
                    <div class="star-rating" data-recipe-id="${recipe.id}" role="radiogroup" aria-label="Rating stars">
                        ${Array(5).fill().map((_, i) => `
                            <i class="fas fa-star star ${i < userRating ? 'selected' : ''}" 
                               data-value="${i + 1}"
                               onclick="selectStar(${recipe.id}, ${i + 1}, event)"
                               role="radio"
                               aria-checked="${i < userRating ? 'true' : 'false'}"
                               tabindex="0"
                               aria-label="${i + 1} star${i !== 0 ? 's' : ''}"></i>
                        `).join('')}
                        <span class="selected-rating">${userRating > 0 ? `You rated: ${userRating}/5` : ''}</span>
                    </div>
                    <button class="rate-btn" 
                            data-recipe-id="${recipe.id}"
                            onclick="submitRating(${recipe.id})"
                            ${hasUserRated ? 'disabled' : ''}
                            aria-label="${hasUserRated ? 'Already rated' : 'Rate this recipe'}">
                        ${hasUserRated ? '<i class="fas fa-check"></i> Already Rated' : '<i class="fas fa-star"></i> Rate Recipe'}
                    </button>
                    ${hasUserRated ? '<div class="user-has-rated">Thank you for your rating!</div>' : ''}
                </div>
            ` : `
                ${ratingCount > 0 ? `
                    <div class="recipe-rating-section">
                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                            <div role="img" aria-label="${averageRating.toFixed(1)} out of 5 stars">
                                ${Array(5).fill().map((_, i) => {
                                    if (i < Math.floor(averageRating)) return '<i class="fas fa-star" style="color: #f1c40f;"></i>';
                                    else if (i === Math.floor(averageRating) && averageRating % 1 >= 0.5) return '<i class="fas fa-star-half-alt" style="color: #f1c40f;"></i>';
                                    else return '<i class="far fa-star" style="color: #ddd;"></i>';
                                }).join('')}
                            </div>
                            <span style="font-weight: 600; color: var(--text-dark);">${averageRating.toFixed(1)}</span>
                            <span style="font-size: 0.875rem; color: var(--text-light);">(${ratingCount} ${ratingCount === 1 ? 'rating' : 'ratings'})</span>
                        </div>
                    </div>
                ` : ''}
            `}
        </div>
    `;
    
    card.addEventListener('click', function(e) {
        if (!e.target.closest('.save-recipe') && 
            !e.target.closest('.star') && 
            !e.target.closest('.rate-btn') && 
            !e.target.closest('.view-recipe-btn')) {
            handleRecipeClick(recipe.id, e);
        }
    });
    
    card.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            handleRecipeClick(recipe.id, e);
        }
    });
    
    return card;
}

// ===== RATING SYSTEM =====
function selectStar(recipeId, rating, event) {
    event.stopPropagation();
    if (userRatings[recipeId]) {
        showNotification('You have already rated this recipe!', 'info');
        return;
    }
    
    const starContainer = event.target.closest('.star-rating');
    const stars = starContainer.querySelectorAll('.star');
    const ratingText = starContainer.querySelector('.selected-rating');
    
    stars.forEach((star, index) => {
        const isSelected = index < rating;
        star.classList.toggle('selected', isSelected);
        star.setAttribute('aria-checked', isSelected.toString());
    });
    
    ratingText.textContent = `Selected: ${rating}/5`;
    const rateBtn = starContainer.nextElementSibling;
    rateBtn.disabled = false;
    rateBtn.dataset.currentRating = rating;
}

function submitRating(recipeId) {
    const rateBtn = document.querySelector(`.rate-btn[data-recipe-id="${recipeId}"]`);
    const currentRating = parseInt(rateBtn.dataset.currentRating);
    
    if (!currentRating || currentRating < 1 || currentRating > 5) {
        showNotification('Please select a rating first!', 'error');
        return;
    }
    
    if (userRatings[recipeId]) {
        showNotification('You have already rated this recipe!', 'info');
        return;
    }
    
    userRatings[recipeId] = currentRating;
    localStorage.setItem('userRatings', JSON.stringify(userRatings));
    
    if (!recipeRatings[recipeId]) {
        recipeRatings[recipeId] = { total: 0, count: 0, average: 0 };
    }
    
    recipeRatings[recipeId].total += currentRating;
    recipeRatings[recipeId].count += 1;
    recipeRatings[recipeId].average = recipeRatings[recipeId].total / recipeRatings[recipeId].count;
    localStorage.setItem('recipeRatings', JSON.stringify(recipeRatings));
    
    rateBtn.disabled = true;
    rateBtn.innerHTML = '<i class="fas fa-check"></i> Already Rated';
    rateBtn.setAttribute('aria-label', 'Already rated');
    
    showNotification(`Thank you for your ${currentRating}-star rating!`, 'success');
    
    setTimeout(() => {
        loadFeaturedRecipes();
        loadTopRatedRecipes();
    }, 500);
}

// ===== RECIPE INTERACTIONS =====
function toggleSaveRecipe(recipeId, event) {
    event.stopPropagation();
    const recipe = recipes.find(r => r.id === recipeId);
    if (recipe) {
        recipe.saved = !recipe.saved;
        const saveButton = event.target.closest('.save-recipe');
        if (saveButton) {
            saveButton.classList.toggle('active', recipe.saved);
            saveButton.setAttribute('aria-label', recipe.saved ? 'Remove from saved' : 'Save recipe');
        }
        localStorage.setItem('chickenRecipes', JSON.stringify(recipes));
        showNotification(recipe.saved ? 'Recipe saved to favorites!' : 'Recipe removed from favorites', 'info');
    }
}

// ===== AD SYSTEM =====
function initializeAdSystem() {
    recipeAdVideoElement = document.getElementById('recipeAdVideo');
    const recipeSkipButton = document.getElementById('recipeSkipButton');
    
    recipeAdVideoElement.addEventListener('loadeddata', function() {
        document.getElementById('recipeAdLoading').style.display = 'none';
    });
    
    recipeAdVideoElement.addEventListener('error', function() {
        skipRecipeAd();
    });
    
    recipeAdVideoElement.addEventListener('ended', function() {
        hideRecipeAd();
    });
    
    recipeSkipButton.addEventListener('click', skipRecipeAd);
}

function handleRecipeClick(recipeId, event) {
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }
    
    const recipe = recipes.find(r => r.id === recipeId);
    if (recipe && recipe.badges && recipe.badges.includes('krabby-patty')) {
        showNotification(' SECRET FORMULA ACTIVATED!  Preparing Krabby Patty...', 'info');
        const button = event.target.closest('.view-recipe-btn') || event.target;
        if (button) {
            button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Loading Secret Formula...';
            button.disabled = true;
            setTimeout(() => {
                button.innerHTML = '<i class="fas fa-utensils"></i> Secret Formula Ready!';
                button.disabled = false;
            }, 1000);
        }
        setTimeout(() => {
            targetRecipeUrl = `recipe-detail.html?id=${recipeId}`;
            showRecipeAd();
        }, 1500);
        return;
    }
    
    targetRecipeUrl = `recipe-detail.html?id=${recipeId}`;
    showRecipeAd();
}

function showRecipeAd() {
    if (isRecipeAdShowing) return;
    isRecipeAdShowing = true;
    const recipeAdOverlay = document.getElementById('recipeAdOverlay');
    const recipeSkipButton = document.getElementById('recipeSkipButton');
    const recipeSkipTimerElement = document.getElementById('recipeSkipTimer');
    
    recipeAdOverlay.classList.add('show');
    document.body.style.overflow = 'hidden';
    
    recipeSkipCountdown = 8;
    recipeSkipTimerElement.textContent = recipeSkipCountdown;
    recipeSkipButton.disabled = true;
    recipeSkipButton.setAttribute('aria-label', `Skip ad in ${recipeSkipCountdown} seconds`);
    
    document.getElementById('recipeAdLoading').style.display = 'flex';
    
    recipeSkipTimer = setInterval(() => {
        recipeSkipCountdown--;
        recipeSkipTimerElement.textContent = recipeSkipCountdown;
        recipeSkipButton.setAttribute('aria-label', `Skip ad in ${recipeSkipCountdown} seconds`);
        if (recipeSkipCountdown <= 0) {
            clearInterval(recipeSkipTimer);
            recipeSkipButton.disabled = false;
            recipeSkipTimerElement.textContent = 'Skip';
            recipeSkipButton.setAttribute('aria-label', 'Skip ad now');
        }
    }, 1000);
}

function skipRecipeAd() {
    if (isRecipeAdShowing && recipeSkipCountdown <= 0) {
        if (recipeAdVideoElement && !recipeAdVideoElement.paused) recipeAdVideoElement.pause();
        hideRecipeAd();
    }
}

function hideRecipeAd() {
    isRecipeAdShowing = false;
    const recipeAdOverlay = document.getElementById('recipeAdOverlay');
    clearInterval(recipeSkipTimer);
    if (recipeAdVideoElement) {
        recipeAdVideoElement.pause();
        recipeAdVideoElement.currentTime = 0;
    }
    recipeAdOverlay.classList.remove('show');
    document.body.style.overflow = '';
    if (targetRecipeUrl) window.location.href = targetRecipeUrl;
}

// ===== FILTERS & SEARCH =====
function populateCategoriesMenu() {
    categoriesMenu.innerHTML = '';
    const counts = {};
    allCategories.forEach(cat => counts[cat.id] = 0);
    
    recipes.forEach(recipe => {
        if (recipe.badges) {
            recipe.badges.forEach(badge => {
                if (counts.hasOwnProperty(badge)) counts[badge]++;
            });
        }
    });
    
    allCategories.forEach(cat => {
        const isKrabbyPatty = cat.id === 'krabby-patty';
        const menuItem = document.createElement('div');
        menuItem.className = `category-menu-item ${isKrabbyPatty ? 'krabby-patty-item' : ''}`;
        menuItem.setAttribute('role', 'button');
        menuItem.setAttribute('tabindex', '0');
        menuItem.innerHTML = `
            <div style="display: flex; align-items: center; gap: 0.5rem;">
                <i class="${cat.icon}"></i>
                <span>${cat.name}</span>
            </div>
            <span class="category-count ${isKrabbyPatty ? 'krabby-patty-count' : ''}">${counts[cat.id]}</span>
        `;
        menuItem.addEventListener('click', () => toggleCategoryFilter(cat.id));
        menuItem.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                toggleCategoryFilter(cat.id);
            }
        });
        categoriesMenu.appendChild(menuItem);
    });
}

function toggleCategoryFilter(categoryId) {
    const index = currentFilters.indexOf(categoryId);
    if (index === -1) currentFilters.push(categoryId);
    else currentFilters.splice(index, 1);
    updateFilterTags();
    loadFeaturedRecipes();
}

function updateFilterTags() {
    filterTagsContainer.innerHTML = '';
    if (currentFilters.length === 0 && !currentSearchTerm) return;
    
    currentFilters.forEach(categoryId => {
        const category = allCategories.find(cat => cat.id === categoryId);
        if (category) {
            const isKrabbyPatty = categoryId === 'krabby-patty';
            const tag = document.createElement('div');
            tag.className = `filter-tag active ${isKrabbyPatty ? 'krabby-patty-tag' : ''}`;
            tag.setAttribute('role', 'button');
            tag.setAttribute('tabindex', '0');
            tag.innerHTML = `
                ${category.name}
                <i class="fas fa-times" style="margin-left: 0.5rem; font-size: 0.75rem;"></i>
            `;
            tag.addEventListener('click', (e) => {
                e.stopPropagation();
                toggleCategoryFilter(categoryId);
            });
            tag.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    toggleCategoryFilter(categoryId);
                }
            });
            filterTagsContainer.appendChild(tag);
        }
    });
    
    if (currentSearchTerm) {
        const tag = document.createElement('div');
        tag.className = 'filter-tag active';
        tag.setAttribute('role', 'button');
        tag.setAttribute('tabindex', '0');
        tag.innerHTML = `
            Search: "${currentSearchTerm}"
            <i class="fas fa-times" style="margin-left: 0.5rem; font-size: 0.75rem;"></i>
        `;
        tag.addEventListener('click', (e) => {
            e.stopPropagation();
            clearSearch();
        });
        tag.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                clearSearch();
            }
        });
        filterTagsContainer.appendChild(tag);
    }
}

function clearFilters() {
    currentFilters = [];
    currentSearchTerm = '';
    searchInput.value = '';
    searchSuggestionsContainer.classList.remove('active');
    updateFilterTags();
    loadFeaturedRecipes();
}

function clearSearch() {
    currentSearchTerm = '';
    searchInput.value = '';
    searchSuggestionsContainer.classList.remove('active');
    updateFilterTags();
    loadFeaturedRecipes();
}

function updateSectionTitle() {
    if (currentFilters.length === 0 && !currentSearchTerm) {
        sectionTitle.textContent = recipes.length > 0 ? 'Featured Recipes' : 'No Recipes Yet';
        sectionSubtitle.textContent = recipes.length > 0 ? 'Handpicked by our culinary experts' : 'Import your first recipe to get started';
    } else if (currentSearchTerm) {
        sectionTitle.textContent = `Search Results for "${currentSearchTerm}"`;
        sectionSubtitle.textContent = 'Recipes matching your search';
    } else if (currentFilters.length === 1) {
        const category = allCategories.find(cat => cat.id === currentFilters[0]);
        if (category.id === 'krabby-patty') {
            sectionTitle.textContent = ' Krabby Patty Special ';
            sectionSubtitle.textContent = 'Secret formula from the Krusty Krab!';
        } else {
            sectionTitle.textContent = `${category.name} Recipes`;
            sectionSubtitle.textContent = `All ${category.name.toLowerCase()} chicken recipes`;
        }
    } else {
        sectionTitle.textContent = 'Filtered Recipes';
        sectionSubtitle.textContent = `Recipes matching ${currentFilters.length} categories`;
    }
}

function initializeSearch() {
    searchInput.addEventListener('input', function() {
        currentSearchTerm = this.value.trim();
        if (currentSearchTerm.length > 0) {
            const searchLower = currentSearchTerm.toLowerCase();
            const filteredRecipes = recipes.filter(recipe => 
                recipe.title.toLowerCase().includes(searchLower) ||
                recipe.description.toLowerCase().includes(searchLower)
            );
            // Show more results - increased from 8 to 20
            displaySearchSuggestions(filteredRecipes.slice(0, 20));
        } else {
            searchSuggestionsContainer.classList.remove('active');
            currentSearchTerm = '';
            updateFilterTags();
            loadFeaturedRecipes();
        }
    });
    
    searchInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            e.preventDefault();
            if (currentSearchTerm) {
                updateFilterTags();
                loadFeaturedRecipes();
                searchSuggestionsContainer.classList.remove('active');
            }
        }
    });
    
    document.addEventListener('click', function(e) {
        if (!searchInput.contains(e.target) && !searchSuggestionsContainer.contains(e.target)) {
            searchSuggestionsContainer.classList.remove('active');
        }
    });
    
    document.addEventListener('keydown', function(e) {
        if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
            e.preventDefault();
            searchInput.focus();
        }
    });
}

function displaySearchSuggestions(filteredRecipes) {
    searchSuggestionsContainer.innerHTML = '';
    if (filteredRecipes.length > 0) {
        filteredRecipes.forEach(recipe => {
            const item = document.createElement('div');
            item.className = 'search-suggestion-item';
            item.setAttribute('role', 'button');
            item.setAttribute('tabindex', '0');
            const firstBadge = recipe.badges && recipe.badges[0];
            const category = allCategories.find(cat => cat.id === firstBadge);
            item.innerHTML = `
                <div class="search-suggestion-image">
                    <img src="${recipe.image}" alt="${recipe.title}" loading="lazy">
                </div>
                <div class="search-suggestion-content">
                    <div class="search-suggestion-title">${recipe.title}</div>
                    ${category ? `<div class="suggestion-category">${category.name}</div>` : ''}
                </div>
            `;
            item.addEventListener('click', function() {
                searchInput.value = recipe.title;
                currentSearchTerm = recipe.title;
                updateFilterTags();
                loadFeaturedRecipes();
                searchSuggestionsContainer.classList.remove('active');
            });
            item.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    searchInput.value = recipe.title;
                    currentSearchTerm = recipe.title;
                    updateFilterTags();
                    loadFeaturedRecipes();
                    searchSuggestionsContainer.classList.remove('active');
                }
            });
            searchSuggestionsContainer.appendChild(item);
        });
        searchSuggestionsContainer.classList.add('active');
    } else {
        const item = document.createElement('div');
        item.className = 'search-suggestion-item';
        item.style.justifyContent = 'center';
        item.innerHTML = `
            <i class="fas fa-search"></i>
            <div style="color: var(--text-light);">
                No recipes found for "${currentSearchTerm}"
            </div>
        `;
        searchSuggestionsContainer.appendChild(item);
        searchSuggestionsContainer.classList.add('active');
    }
}

function importRecipesFromFile(event) {
    const file = event.target.files[0];
    if (!file) return;
    
    const reader = new FileReader();
    
    reader.onload = function(e) {
        try {
            const importedData = JSON.parse(e.target.result);
            console.log(' Imported data structure:', importedData);
            
            let importedRecipes = Array.isArray(importedData) ? importedData : [importedData];
            console.log(' Number of recipes in file:', importedRecipes.length);
            
            const validRecipes = [];
            importedRecipes.forEach((recipe, index) => {
                if (!recipe.title || !recipe.description || !recipe.image) {
                    console.warn(`Recipe ${index + 1} skipped: Missing required fields`);
                    return;
                }
                
                if (!recipe.id) recipe.id = Date.now() + index;
                if (!recipe.badges || !Array.isArray(recipe.badges)) recipe.badges = ['traditional'];
                if (recipe.title && recipe.title.toLowerCase().includes('krabby patty')) {
                    if (!recipe.badges.includes('krabby-patty')) recipe.badges.push('krabby-patty');
                    if (!recipe.badges.includes('funny')) recipe.badges.push('funny');
                }
                if (recipe.saved === undefined) recipe.saved = false;
                
                validRecipes.push(recipe);
                console.log(` Added recipe: ${recipe.title}`);
            });
            
            if (validRecipes.length === 0) {
                showNotification('No valid recipes found in the file.', 'error');
                return;
            }
            
            // Merge with existing recipes
            const existingRecipes = JSON.parse(localStorage.getItem('chickenRecipes')) || [];
            recipes = [...existingRecipes, ...validRecipes];
            
            localStorage.setItem('chickenRecipes', JSON.stringify(recipes));
            console.log(' Saved to localStorage. Total recipes:', recipes.length);
            
            // Reload everything
            loadFeaturedRecipes();
            loadTopRatedRecipes();
            populateCategoriesMenu();
            
            // Show success message
            const hasKrabbyPatty = validRecipes.some(recipe => 
                recipe.title && recipe.title.toLowerCase().includes('krabby patty')
            );
            
            let msg = `${validRecipes.length} recipes imported successfully!`;
            if (hasKrabbyPatty) msg += '  SECRET FORMULA ADDED!';
            
            showNotification(msg, 'success');
            
            setTimeout(() => {
                showNotification(`Total recipes: ${recipes.length}`, 'info');
            }, 1500);
            
            // Reset file input
            event.target.value = '';
            
        } catch (error) {
            console.error('Import error:', error);
            showNotification(`Error: ${error.message}`, 'error');
        }
    };
    
    reader.onerror = function() {
        showNotification('Error reading the file.', 'error');
    };
    
    reader.readAsText(file);
}
// ===== CAROUSEL NAVIGATION =====
function initializeScrollNavigation() {
    scrollPrevFeatured.addEventListener('click', () => scrollRecipes('featured', 'prev'));
    scrollNextFeatured.addEventListener('click', () => scrollRecipes('featured', 'next'));
    scrollPrevTopRated.addEventListener('click', () => scrollRecipes('topRated', 'prev'));
    scrollNextTopRated.addEventListener('click', () => scrollRecipes('topRated', 'next'));
    
    [scrollPrevFeatured, scrollNextFeatured, scrollPrevTopRated, scrollNextTopRated].forEach(button => {
        button.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                this.click();
            }
        });
    });
    
    setTimeout(() => {
        updateNavButtons('featured');
        updateNavButtons('topRated');
    }, 500);
}

function calculateCarouselMetrics(section) {
    const wrapper = section === 'featured' ? featuredRecipesWrapper : topRatedRecipesWrapper;
    const container = wrapper.parentElement;
    if (!wrapper || wrapper.children.length === 0) return null;
    const card = wrapper.querySelector('.recipe-card');
    if (!card) return null;
    
    const cardStyle = window.getComputedStyle(card);
    const cardWidth = card.offsetWidth + parseInt(cardStyle.marginLeft || 0) + parseInt(cardStyle.marginRight || 0);
    const cardGap = 24;
    const containerWidth = container.offsetWidth;
    
    let totalCardsWidth = 0;
    Array.from(wrapper.children).forEach(child => {
        const childStyle = window.getComputedStyle(child);
        totalCardsWidth += child.offsetWidth + 
                          parseInt(childStyle.marginLeft || 0) + 
                          parseInt(childStyle.marginRight || 0) + 
                          cardGap;
    });
    totalCardsWidth -= cardGap;
    
    const visibleCards = Math.floor(containerWidth / cardWidth);
    const maxPosition = Math.max(0, totalCardsWidth - containerWidth);
    const scrollStep = visibleCards * cardWidth;
    
    return { cardWidth, cardGap, containerWidth, visibleCards, totalWidth: totalCardsWidth, maxPosition, scrollStep };
}

function scrollRecipes(section, direction) {
    const wrapper = section === 'featured' ? featuredRecipesWrapper : topRatedRecipesWrapper;
    const metrics = calculateCarouselMetrics(section);
    if (!metrics || metrics.maxPosition <= 0) return;
    
    let currentPosition = carouselStates[section].currentPosition;
    const scrollAmount = metrics.scrollStep;
    
    if (direction === 'prev') {
        currentPosition -= scrollAmount;
        if (currentPosition < 0) currentPosition = 0;
    } else {
        currentPosition += scrollAmount;
        if (currentPosition > metrics.maxPosition) currentPosition = metrics.maxPosition;
    }
    
    carouselStates[section].currentPosition = currentPosition;
    wrapper.style.transform = `translateX(-${currentPosition}px)`;
    updateNavButtons(section);
}

function updateNavButtons(section) {
    const prevButton = section === 'featured' ? scrollPrevFeatured : scrollPrevTopRated;
    const nextButton = section === 'featured' ? scrollNextFeatured : scrollNextTopRated;
    const metrics = calculateCarouselMetrics(section);
    
    if (!metrics) {
        prevButton.style.opacity = '0.5';
        nextButton.style.opacity = '0.5';
        prevButton.style.cursor = 'not-allowed';
        nextButton.style.cursor = 'not-allowed';
        prevButton.setAttribute('aria-disabled', 'true');
        nextButton.setAttribute('aria-disabled', 'true');
        return;
    }
    
    if (metrics.maxPosition <= 0) {
        prevButton.classList.add('disabled');
        nextButton.classList.add('disabled');
        prevButton.setAttribute('aria-disabled', 'true');
        nextButton.setAttribute('aria-disabled', 'true');
        return;
    }
    
    if (carouselStates[section].currentPosition <= 0) {
        prevButton.classList.add('disabled');
        prevButton.setAttribute('aria-disabled', 'true');
    } else {
        prevButton.classList.remove('disabled');
        prevButton.setAttribute('aria-disabled', 'false');
    }
    
    const tolerance = 5;
    if (carouselStates[section].currentPosition >= metrics.maxPosition - tolerance) {
        nextButton.classList.add('disabled');
        nextButton.setAttribute('aria-disabled', 'true');
    } else {
        nextButton.classList.remove('disabled');
        nextButton.setAttribute('aria-disabled', 'false');
    }
}

// ===== AUTO SCROLL =====
function initializeAutoScroll() {
    setTimeout(() => {
        startAutoScroll('featured');
        startAutoScroll('topRated');
    }, 1000);
}

function startAutoScroll(section) {
    const wrapper = section === 'featured' ? featuredRecipesWrapper : topRatedRecipesWrapper;
    if (carouselStates[section].autoScrollInterval) clearInterval(carouselStates[section].autoScrollInterval);
    
    const metrics = calculateCarouselMetrics(section);
    if (!metrics || metrics.maxPosition <= 0) return;
    
    carouselStates[section].autoScrollInterval = setInterval(() => {
        if (carouselStates[section].isHovering) return;
        const metrics = calculateCarouselMetrics(section);
        if (!metrics || metrics.maxPosition <= 0) {
            clearInterval(carouselStates[section].autoScrollInterval);
            return;
        }
        
        let currentPosition = carouselStates[section].currentPosition;
        currentPosition += metrics.scrollStep;
        
        if (currentPosition > metrics.maxPosition) {
            currentPosition = 0;
            wrapper.style.transition = 'none';
            wrapper.style.transform = `translateX(-${currentPosition}px)`;
            void wrapper.offsetWidth;
            wrapper.style.transition = 'transform 0.5s ease';
        }
        
        carouselStates[section].currentPosition = currentPosition;
        wrapper.style.transform = `translateX(-${currentPosition}px)`;
        updateNavButtons(section);
    }, 5000);
    
    wrapper.addEventListener('mouseenter', () => carouselStates[section].isHovering = true);
    wrapper.addEventListener('mouseleave', () => carouselStates[section].isHovering = false);
    
    const prevButton = section === 'featured' ? scrollPrevFeatured : scrollPrevTopRated;
    const nextButton = section === 'featured' ? scrollNextFeatured : scrollNextTopRated;
    [prevButton, nextButton].forEach(button => {
        if (button) {
            button.addEventListener('mouseenter', () => carouselStates[section].isHovering = true);
            button.addEventListener('mouseleave', () => carouselStates[section].isHovering = false);
        }
    });
}

// ===== UI INTERACTIONS =====
function initializeThemeToggle() {
    const currentTheme = localStorage.getItem('theme') || 'light';
    document.documentElement.setAttribute('data-theme', currentTheme);
    updateThemeIcon(currentTheme);
    
    themeToggle.addEventListener('click', function() {
        const currentTheme = document.documentElement.getAttribute('data-theme');
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        document.documentElement.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
        updateThemeIcon(newTheme);
        showNotification(`Switched to ${newTheme} theme`, 'info');
    });
    
    themeToggle.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            this.click();
        }
    });
}

function updateThemeIcon(theme) {
    const icon = themeToggle.querySelector('i');
    if (theme === 'light') {
        icon.className = 'fas fa-moon';
        themeToggle.setAttribute('aria-label', 'Switch to dark theme');
    } else {
        icon.className = 'fas fa-sun';
        themeToggle.setAttribute('aria-label', 'Switch to light theme');
    }
}

function initializeScrollEvents() {
    window.addEventListener('scroll', function() {
        if (window.pageYOffset > 300) backToTop.classList.add('show');
        else backToTop.classList.remove('show');
    });
    
    backToTop.addEventListener('click', function() {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    });
    
    backToTop.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    });
}

function closeFloatingAd() {
    floatingAd.classList.remove('show');
}

function initializeKeyboardNavigation() {
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            if (newsletterPopup.classList.contains('show')) newsletterPopup.classList.remove('show');
            if (document.getElementById('recipeAdOverlay').classList.contains('show')) skipRecipeAd();
        }
    });
}

// ===== NOTIFICATION SYSTEM =====
function showNotification(message, type = 'info') {
    const existingNotification = document.querySelector('.import-notification');
    if (existingNotification) existingNotification.remove();
    
    const notification = document.createElement('div');
    notification.className = `import-notification import-notification-${type}`;
    notification.setAttribute('role', 'alert');
    const isKrabbyPatty = message.includes('Krabby Patty') || message.includes('SECRET FORMULA');
    
    notification.innerHTML = `
        <div style="display: flex; align-items: center; gap: 0.75rem;">
            ${isKrabbyPatty ? '' : `<i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>`}
            <span>${message}</span>
        </div>
        <button onclick="this.parentElement.remove()" style="background: none; border: none; color: inherit; cursor: pointer;" aria-label="Close notification">
            <i class="fas fa-times"></i>
        </button>
    `;
    
    document.body.appendChild(notification);
    const duration = isKrabbyPatty ? 7000 : 5000;
    setTimeout(() => {
        if (notification.parentElement) notification.remove();
    }, duration);
}

// ===== NEWSLETTER POPUP =====
closePopup.addEventListener('click', function() {
    newsletterPopup.classList.remove('show');
});

newsletterPopup.addEventListener('click', function(e) {
    if (e.target === newsletterPopup) newsletterPopup.classList.remove('show');
});

closePopup.addEventListener('keydown', function(e) {
    if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        this.click();
    }
});

// ===== PERFORMANCE OPTIMIZATION =====
if ('IntersectionObserver' in window) {
    const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const img = entry.target;
                img.src = img.dataset.src;
                img.classList.add('loaded');
                observer.unobserve(img);
            }
        });
    });
    document.querySelectorAll('img[data-src]').forEach(img => imageObserver.observe(img));
}
</script>
</body>
</html>
